<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd">

    <changeSet id="seed-roles" author="system">
        <comment>Seed roles data</comment>
        <sql>
            INSERT INTO roles (name, description, purchasing_power) VALUES
            ('ROLE_SUPER_ADMIN', 'Super Administrator with full system access', true),
            ('ROLE_ADMIN', 'Administrator with management privileges', true),
            ('ROLE_PROCUREMENT_MANAGER', 'Procurement Manager with purchasing power', true),
            ('ROLE_DEPARTMENT_HEAD', 'Department Head with limited purchasing power', true),
            ('ROLE_FACULTY_MEMBER', 'Faculty Member with basic access', false),
            ('ROLE_STUDENT', 'Student with read-only access', false),
            ('ROLE_STAFF', 'Staff member with operational access', false),
            ('ROLE_VIEWER', 'Read-only viewer access', false)
            ON DUPLICATE KEY UPDATE
                description = VALUES(description),
                purchasing_power = VALUES(purchasing_power);
        </sql>
    </changeSet>

    <changeSet id="seed-users" author="system">
        <comment>Seed users data</comment>
        <sql>
            INSERT INTO users (username, email, name, password) VALUES
            ('superadmin', 'superadmin@just.edu.bd', 'Super Administrator', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin', 'admin@just.edu.bd', 'System Administrator', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('user_chan', 'user.chan@just.edu.bd', 'Chancellor Office User', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin_chan', 'admin.chan@just.edu.bd', 'Chancellor Office Admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('user_vc', 'user.vc@just.edu.bd', 'Vice Chancellor Office User', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin_vc', 'admin.vc@just.edu.bd', 'Vice Chancellor Office Admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('user_pvc', 'user.pvc@just.edu.bd', 'Pro Vice Chancellor Office User', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin_pvc', 'admin.pvc@just.edu.bd', 'Pro Vice Chancellor Office Admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('user_treas', 'user.treas@just.edu.bd', 'Treasurer Office User', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin_treas', 'admin.treas@just.edu.bd', 'Treasurer Office Admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('user_cse', 'user.cse@just.edu.bd', 'CSE User', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin_cse', 'admin.cse@just.edu.bd', 'CSE Admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('user_reg', 'user.reg@just.edu.bd', 'Registrar User', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi'),
            ('admin_reg', 'admin.reg@just.edu.bd', 'Registrar Admin', '$2a$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi')
            ON DUPLICATE KEY UPDATE
                email = VALUES(email),
                name = VALUES(name),
                password = VALUES(password);
        </sql>
    </changeSet>

    <changeSet id="seed-offices-csv-v3" author="system">
        <comment>Seed offices data from CSV</comment>
        <sql>
            SET FOREIGN_KEY_CHECKS = 0;
            DELETE FROM offices WHERE id IS NOT NULL;
            SET FOREIGN_KEY_CHECKS = 1;
        </sql>
        <loadData tableName="offices" file="csv/office.csv" separator="," encoding="UTF-8">
            <column name="id" type="NUMERIC"/>
            <column name="name" type="STRING"/>
            <column name="name_bn" type="STRING"/>
            <column name="type" type="STRING"/>
            <column name="parent_id" type="NUMERIC"/>
            <column name="code" type="STRING"/>
            <column name="description" type="STRING"/>
            <column name="order_index" header="order" type="NUMERIC"/>
            <column name="is_active" type="BOOLEAN"/>
        </loadData>
        <sql>
            UPDATE offices SET type = UPPER(type) WHERE type IS NOT NULL;
            UPDATE offices SET created_at = NOW(), updated_at = NOW() WHERE created_at IS NULL;
        </sql>
    </changeSet>

    <changeSet id="seed-designations" author="system">
        <comment>Seed designations data</comment>
        <sql>
            INSERT INTO designations (user_id, role_id, office_id, is_primary, is_active, assigned_at, created_at, updated_at) VALUES
            ((SELECT id FROM users WHERE username = 'superadmin'), (SELECT id FROM roles WHERE name = 'ROLE_SUPER_ADMIN'), 1, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'superadmin'), (SELECT id FROM roles WHERE name = 'ROLE_SUPER_ADMIN'), 2, false, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin'), (SELECT id FROM roles WHERE name = 'ROLE_ADMIN'), 2, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'user_chan'), (SELECT id FROM roles WHERE name = 'ROLE_STAFF'), 1, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin_chan'), (SELECT id FROM roles WHERE name = 'ROLE_ADMIN'), 1, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'user_vc'), (SELECT id FROM roles WHERE name = 'ROLE_STAFF'), 2, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin_vc'), (SELECT id FROM roles WHERE name = 'ROLE_ADMIN'), 2, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'user_pvc'), (SELECT id FROM roles WHERE name = 'ROLE_STAFF'), 3, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin_pvc'), (SELECT id FROM roles WHERE name = 'ROLE_ADMIN'), 3, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'user_treas'), (SELECT id FROM roles WHERE name = 'ROLE_STAFF'), 4, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin_treas'), (SELECT id FROM roles WHERE name = 'ROLE_ADMIN'), 4, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'user_cse'), (SELECT id FROM roles WHERE name = 'ROLE_FACULTY_MEMBER'), 14, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin_cse'), (SELECT id FROM roles WHERE name = 'ROLE_DEPARTMENT_HEAD'), 14, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'user_reg'), (SELECT id FROM roles WHERE name = 'ROLE_STAFF'), 53, true, true, NOW(), NOW(), NOW()),
            ((SELECT id FROM users WHERE username = 'admin_reg'), (SELECT id FROM roles WHERE name = 'ROLE_ADMIN'), 53, true, true, NOW(), NOW(), NOW())
            ON DUPLICATE KEY UPDATE
                is_primary = VALUES(is_primary),
                is_active = VALUES(is_active),
                updated_at = NOW();
        </sql>
    </changeSet>

    <changeSet id="seed-item-categories" author="system">
        <comment>Seed item categories data</comment>
        <sql>
            INSERT INTO item_categories (name, name_bn, code, description, is_active, created_at, updated_at) VALUES
            ('Electronics', 'ইলেকট্রনিক্স', 'ELEC', 'Electronic devices and components', true, NOW(), NOW()),
            ('Furniture', 'আসবাবপত্র', 'FURN', 'Office and classroom furniture', true, NOW(), NOW()),
            ('Lab Equipment', 'ল্যাব যন্ত্রপাতি', 'LAB_EQ', 'Laboratory equipment and supplies', true, NOW(), NOW()),
            ('Stationery', 'স্টেশনারি', 'STAT', 'Office stationery and supplies', true, NOW(), NOW()),
            ('Books', 'বই', 'BOOK', 'Books and educational materials', true, NOW(), NOW()),
            ('Chemicals', 'রাসায়নিক', 'CHEM', 'Chemical substances and reagents', true, NOW(), NOW()),
            ('Software', 'সফটওয়্যার', 'SOFT', 'Software licenses and digital products', true, NOW(), NOW()),
            ('Maintenance', 'রক্ষণাবেক্ষণ', 'MAINT', 'Maintenance and repair supplies', true, NOW(), NOW())
            ON DUPLICATE KEY UPDATE
                name_bn = VALUES(name_bn),
                code = VALUES(code),
                description = VALUES(description),
                is_active = VALUES(is_active),
                updated_at = NOW();
        </sql>
    </changeSet>

    <changeSet id="seed-units" author="system">
        <comment>Seed units data</comment>
        <sql>
            INSERT INTO units (name, name_bn, symbol, description, is_active, created_at, updated_at) VALUES
            ('Piece', 'পিস', 'pcs', 'Individual pieces or items', true, NOW(), NOW()),
            ('Kilogram', 'কিলোগ্রাম', 'kg', 'Weight in kilograms', true, NOW(), NOW()),
            ('Liter', 'লিটার', 'L', 'Volume in liters', true, NOW(), NOW()),
            ('Meter', 'মিটার', 'm', 'Length in meters', true, NOW(), NOW()),
            ('Box', 'বাক্স', 'box', 'Boxes or cartons', true, NOW(), NOW()),
            ('Pack', 'প্যাক', 'pack', 'Packages or sets', true, NOW(), NOW()),
            ('Set', 'সেট', 'set', 'Complete sets', true, NOW(), NOW()),
            ('Dozen', 'ডজন', 'doz', 'Dozen (12 pieces)', true, NOW(), NOW())
            ON DUPLICATE KEY UPDATE
                name_bn = VALUES(name_bn),
                symbol = VALUES(symbol),
                description = VALUES(description),
                is_active = VALUES(is_active),
                updated_at = NOW();
        </sql>
    </changeSet>

    <changeSet id="seed-items" author="system">
        <comment>Seed items data</comment>
        <sql>
            INSERT INTO items (name, name_bn, category_id, code, description, unit_id, quantity, is_active, created_at, updated_at) VALUES
            ('Laptop Computer', 'ল্যাপটপ কম্পিউটার', (SELECT id FROM item_categories WHERE name = 'Electronics' LIMIT 1), 'LAPTOP-DELL-001', 'Dell Inspiron 15 Laptop', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Projector', 'প্রজেক্টর', (SELECT id FROM item_categories WHERE name = 'Electronics' LIMIT 1), 'PROJ-EPSON-001', 'Epson EB-S41 Projector', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Office Chair', 'অফিস চেয়ার', (SELECT id FROM item_categories WHERE name = 'Furniture' LIMIT 1), 'CHAIR-EXEC-001', 'Executive Office Chair', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Whiteboard', 'হোয়াইটবোর্ড', (SELECT id FROM item_categories WHERE name = 'Furniture' LIMIT 1), 'BOARD-WHT-001', 'Magnetic Whiteboard 4x6 ft', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Microscope', 'মাইক্রোস্কোপ', (SELECT id FROM item_categories WHERE name = 'Lab Equipment' LIMIT 1), 'MICRO-COM-001', 'Compound Microscope', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Notebook', 'নোটবুক', (SELECT id FROM item_categories WHERE name = 'Stationery' LIMIT 1), 'NOTE-A4-001', 'A4 Notebook 200 pages', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Programming Book', 'প্রোগ্রামিং বই', (SELECT id FROM item_categories WHERE name = 'Books' LIMIT 1), 'BOOK-JAVA-001', 'Java Programming Textbook', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW()),
            ('Software License', 'সফটওয়্যার লাইসেন্স', (SELECT id FROM item_categories WHERE name = 'Software' LIMIT 1), 'SW-MS-OFFICE', 'Microsoft Office 365 License', (SELECT id FROM units WHERE name = 'Piece' LIMIT 1), 0, true, NOW(), NOW())
            ON DUPLICATE KEY UPDATE
                name_bn = VALUES(name_bn),
                category_id = VALUES(category_id),
                description = VALUES(description),
                unit_id = VALUES(unit_id),
                quantity = VALUES(quantity),
                is_active = VALUES(is_active),
                updated_at = NOW();
        </sql>
    </changeSet>

</databaseChangeLog>